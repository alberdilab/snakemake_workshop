# Advanced inputs

## Expansions

Use `expand()` to build input lists for the all rule or aggregations.

```{sh eval=FALSE}
SAMPLES = ["S1", "S2", "S3"]

rule all:
    input:
        expand("qc/{sample}_fastqc.html", sample=SAMPLES)
```

The above code results in:

```{sh eval=FALSE}
rule all:
    input:
        "qc/S1_fastqc.html",
        "qc/S2_fastqc.html",
        "qc/S3_fastqc.html"
```

## Pattern-building helpers

Use `glob_wildcards` to discover samples containing a certain pattern:

```{sh eval=FALSE}
from snakemake.io import glob_wildcards
SAMPLES = glob_wildcards("reads/{sample}.fastq.gz").sample

rule all:
    input:
        expand("qc/{sample}_fastqc.html", sample=SAMPLES)
```

Get a list of file names in the directory `reads` that end with `_1.fq.gz`:

```{sh eval=FALSE}
from pathlib import Path
SAMPLES = sorted({f.stem.rsplit("_", 1)[0] for f in Path("reads").glob("*_1.fq.gz")})

rule all:
    input:
        expand("results/{sample}.tsv", sample=SAMPLES)
```

## Wildcards

```{sh eval=FALSE}
rule align:
    input:
        lambda wc: [f"reads/{wc.sample}_R1.fastq.gz",
                    f"reads/{wc.sample}_R2.fastq.gz"]
    output:
        "results/{sample}.bam"
```

## Exercise 4

